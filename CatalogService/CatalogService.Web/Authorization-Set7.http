# A set of sample requests covering authorization for part #7

@CatalogService_Web_HostAddress=http://localhost:5164
@Eshop_Authentication_HostAddress=http://localhost:8080
@Eshop_Client_Id=eshop-client
@Eshop_Client_Secret=y4z2aT2B1IrnIidEtvxw99fQaGKwyGU7

@Eshop_Customer_Id=customer1
@Eshop_Customer_Password=paasowrd1
@Eshop_Customer_Token=ey

@Eshop_Manager_Id=manager1
@Eshop_Manager_Password=password2
@Eshop_Manager_Token=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJNZU95SkluN0E1NmkwTDBpYl9Vb0x3S0luNXN2bTM1aXNQNVh0V0NtS09BIn0.eyJleHAiOjE3MzE5NjUwMDUsImlhdCI6MTczMTk2NDcwNSwianRpIjoiNTdiNzU4ZDgtZTA4NC00ZWI0LTgwYjgtOTU4ZDk1NzhmMTdiIiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlYWxtcy9lc2hvcC1pZGVudGl0eSIsInN1YiI6IjQyM2I1MTZlLTNjMjMtNGFkMC05MTQxLTdkNWQ5MzdiODBiNyIsInR5cCI6IkJlYXJlciIsImF6cCI6ImVzaG9wLWNsaWVudCIsInNpZCI6ImFkNWFlMjEzLWM0ZTgtNDdjOS1hZDU1LWIzMTgzMDUxMDlkMCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiLyoiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImVzaG9wX21hbmFnZXIiXX0sInNjb3BlIjoicHJvZmlsZSBlbWFpbCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJuYW1lIjoiQ2FzYSBOdWdvIiwicHJlZmVycmVkX3VzZXJuYW1lIjoibWFuYWdlcjEiLCJnaXZlbl9uYW1lIjoiQ2FzYSIsImZhbWlseV9uYW1lIjoiTnVnbyIsImVtYWlsIjoibWFuYWdlcjFAbWFpbC5jb20ifQ.ETO70eLodrQwBXQd2rIVfeJ5bEk0rxG-XEtfOKi81MfcZY8gmMg55JJhij53fIWtHEhLT6xgZ7bnUlYQH9jfU71s-g4QD6L9tIZ4YUpIwaxTD6scKdijnjdUlxGl8B5OdooOvb7nrL2WnJ-6jSO5q9opPnZLyLS_opKsI9LwTlNkaaud11vARYmOAozW3iXRH8eCzYezILmcl5oIFk3dtLcOkQG9hyswTFkB0dfDAIBaMuiC4W6f0k9SDTs-DABni4EtL_UPKP7omqyQR57rBgGV12Gz-8-di7e2PBaBZQ00Xg1HuWHFKG6-BMBM32I6CELkbpO-hyhWzZoQkjmCug

###

# To retrieve customer token

POST {{Eshop_Authentication_HostAddress}}/realms/eshop-identity/protocol/openid-connect/token
Content-Type: application/x-www-form-urlencoded

client_id={{Eshop_Client_Id}}&client_secret={{Eshop_Client_Secret}}&username={{Eshop_Customer_Id}}&password={{Eshop_Customer_Password}}&grant_type=password

###

# To retrieve manager token

POST {{Eshop_Authentication_HostAddress}}/realms/eshop-identity/protocol/openid-connect/token
Content-Type: application/x-www-form-urlencoded

client_id={{Eshop_Client_Id}}&client_secret={{Eshop_Client_Secret}}&username={{Eshop_Manager_Id}}&password={{Eshop_Manager_Password}}&grant_type=password

###

# To refresh customer token

###

@Eshop_Customer_Refresh_Token=eyJhbGciOiJIUzUxMiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIxZmM1ODViMC02ODlhLTQ2NzMtYjI4OC1mYTU3ODBiZmJjMzEifQ.eyJleHAiOjE3MzE5NjY3MzMsImlhdCI6MTczMTk2NDkzMywianRpIjoiMjUyZTZhMWItZGU1YS00MGNmLTlkNjQtZDk0ZTkwMGExYzRlIiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlYWxtcy9lc2hvcC1pZGVudGl0eSIsImF1ZCI6Imh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9yZWFsbXMvZXNob3AtaWRlbnRpdHkiLCJzdWIiOiI0MjNiNTE2ZS0zYzIzLTRhZDAtOTE0MS03ZDVkOTM3YjgwYjciLCJ0eXAiOiJSZWZyZXNoIiwiYXpwIjoiZXNob3AtY2xpZW50Iiwic2lkIjoiMjNmMWQ3NDctMzQ4Ny00MzFjLThjZTQtNjBkZWFkOGRhNDdjIiwic2NvcGUiOiJwcm9maWxlIGJhc2ljIHJvbGVzIGVtYWlsIHdlYi1vcmlnaW5zIGFjciJ9.KO5WvldLKkR28IAwz2_PcBXw_6H8d_k2iNzmSxd-6SaFonqc1l8qvys41BqXUzJSZ_TRdJukmGorAnuSKxgztg

POST {{Eshop_Authentication_HostAddress}}/realms/eshop-identity/protocol/openid-connect/token
Content-Type: application/x-www-form-urlencoded

client_id={{Eshop_Client_Id}}&client_secret={{Eshop_Client_Secret}}&grant_type=refresh_token&refresh_token={{Eshop_Customer_Refresh_Token}}


# To refresh manager token

@Eshop_Manager_Refresh_Token=eyJhbGciOiJIUzUxMiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIxZmM1ODViMC02ODlhLTQ2NzMtYjI4OC1mYTU3ODBiZmJjMzEifQ.eyJleHAiOjE3MzE5NjY3MzMsImlhdCI6MTczMTk2NDkzMywianRpIjoiMjUyZTZhMWItZGU1YS00MGNmLTlkNjQtZDk0ZTkwMGExYzRlIiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlYWxtcy9lc2hvcC1pZGVudGl0eSIsImF1ZCI6Imh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9yZWFsbXMvZXNob3AtaWRlbnRpdHkiLCJzdWIiOiI0MjNiNTE2ZS0zYzIzLTRhZDAtOTE0MS03ZDVkOTM3YjgwYjciLCJ0eXAiOiJSZWZyZXNoIiwiYXpwIjoiZXNob3AtY2xpZW50Iiwic2lkIjoiMjNmMWQ3NDctMzQ4Ny00MzFjLThjZTQtNjBkZWFkOGRhNDdjIiwic2NvcGUiOiJwcm9maWxlIGJhc2ljIHJvbGVzIGVtYWlsIHdlYi1vcmlnaW5zIGFjciJ9.KO5WvldLKkR28IAwz2_PcBXw_6H8d_k2iNzmSxd-6SaFonqc1l8qvys41BqXUzJSZ_TRdJukmGorAnuSKxgztg

POST {{Eshop_Authentication_HostAddress}}/realms/eshop-identity/protocol/openid-connect/token
Content-Type: application/x-www-form-urlencoded

client_id={{Eshop_Client_Id}}&client_secret={{Eshop_Client_Secret}}&grant_type=refresh_token&refresh_token={{Eshop_Manager_Refresh_Token}}

###

# To troubleshoot keycloak

@Keycloak_Username=admin
@Keycloak_Password=admin
@Keycloak_Client_id=admin-cli
@Keycloak_AccessToken=

###

POST {{Eshop_Authentication_HostAddress}}/realms/master/protocol/openid-connect/token
Content-Type: application/x-www-form-urlencoded

client_id={{Keycloak_Client_id}}&username={{Keycloak_Username}}&password={{Keycloak_Password}}&grant_type=password

###

GET {{Eshop_Authentication_HostAddress}}/admin/realms
Authorization: Bearer {{Keycloak_AccessToken}}
